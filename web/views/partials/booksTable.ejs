<%- include('../layout/header') %>

    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold">Nuestro CatÃ¡logo</h1>
            <p class="lead text-muted">Explora todos los tÃ­tulos disponibles en nuestra librerÃ­a</p>
        </div>

        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
            <% books.forEach(book=> { %>
                <div class="col">
                    <div class="card h-100 card-custom shadow-sm">
                        <img src="<%= book.cover_url || '/images/default-cover.jpg' %>" class="card-img-top book-img"
                            alt="<%= book.title %>">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-truncate">
                                <%= book.title %>
                            </h5>
                            <p class="precio mt-auto fw-bold text-primary fs-5">
                                <%= book.price %>â‚¬
                            </p>

                            <div class="d-grid gap-2 mt-3">
                                <a href="/books/book/<%= book.id %>" class="btn btn-outline-primary btn-sm">Ver
                                    detalles</a>
                                <form action="/cart/add" method="POST" class="d-inline">
                                    <input type="hidden" name="book_id" value="<%= book.id %>">
                                    <div class="input-group input-group-sm" style="width: 120px;">
                                        <label for="quantity">Cantidad: </label>
                                        <input type="number" name="quantity" value="1" min="1" max="<%= book.stock %>"
                                            class="form-control" <%=book.stock <=0 ? 'disabled' : '' %>>
                                        <button type="submit" class="btn btn-success" <%=book.stock <=0 ? 'disabled'
                                            : '' %>
                                            title="<%= book.stock <=0 ? 'Sin stock' : 'AÃ±adir al carrito' %>">
                                                AÃ±adir al carrito ðŸ›’
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <% }) %>
        </div>
    </div>

    <%- include('../layout/footer') %>